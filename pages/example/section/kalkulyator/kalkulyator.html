<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Document</title>
	<link rel="stylesheet" href="kalkulyator.css">
</head>
<body>
	<div class="container">
		
		<div class="calc">

			<h2>Расчёт стоимости</h2>

			<label for="card_edition">Выберите тираж</label>
			<select class="form-control" name="edition" id="card_edition">
				<option value="90">90</option>
				<option value="120">120</option>
				<option value="150">150</option>
				<option value="180">180</option>
				<option value="210">210</option>
				<option value="240">240</option>
				<option value="270">270</option>
				<option value="300">300</option>
				<option value="360">360</option>
				<option value="420">420</option>
				<option value="510">510</option>
				<option value="600">600</option>
				<option value="900">900</option>
				<option value="1020">1020</option>
				<option value="1500">1500</option>
				<option value="3000">3000</option>
			</select>

			<label for="card_paper">Выберите бумагу</label>
			<select class="form-control" name="card_paper" id="card_paper">
				<option data-paper-ratio="6.8" value="Мелованная бумага (белая)">Мелованная бумага (белая)</option>
				<option data-paper-ratio="40.5" value="Бумага повышенной белезны (SPLENDORGEL)">Бумага повышенной белезны (SPLENDORGEL)</option>
				<option data-paper-ratio="45" value="Prestige Лён (белый)">Prestige Лён (белый)</option>
			</select>

			<label for="card_color">Выберите цветность</label>
			<select class="form-control" name="card_color" id="card_color">
				<option data-color="1" data-print-file="110" data-print="14" value="Односторонняя чёрно белая">Односторонняя чёрно белая</option>
				<option data-color="2" data-print-file="220" data-print="28" value="Двусторонняя чёрно белая">Двусторонняя чёрно белая</option>
				<option data-color="3" data-print-file="110" data-print="37" value="Односторонняя цветная">Односторонняя цветная</option>
				<option data-color="4" data-print-file="220" data-print="51" value="Цветная лицевая + ч/б оборотная">Цветная лицевая + ч/б оборотная</option>
				<option data-color="5" data-print-file="220" data-print="74" value="Двусторонняя цветная">Двусторонняя цветная</option>
			</select>

			<p>Стоимость за тираж:</p>
			<p class="price">
				<span class="final-price" id="final_price">172.4</span> Руб.
			</p>
			
		</div>

		<div class="card-images">
			<img id="card_1_0" src="img/1_0.jpg" alt="Односторонняя чёрно белая">
			<img id="card_1_1" src="img/1_1.jpg" alt="Двусторонняя чёрно белая">
			<img id="card_4_0" src="img/4_0.jpg" alt="Односторонняя цветная">
			<img id="card_4_1" src="img/4_1.jpg" alt="Цветная лицевая + ч/б оборотная">
			<img id="card_4_4" src="img/4_4.jpg" alt="Двусторонняя цветная">
		</div>

	</div>

	<script src="../slider/vendor/jquery-3.2.1.min.js"></script>
	<script>
		$(document).ready(function(){

			$('.calc select').change(function(){
				$edition = $('select#card_edition').val();
				$paper = $('select#card_paper').val();
				$color = $('select#card_color').val();
				$print_file = $('select#card_color option:selected').attr('data-print-file');
				$paper_ratio = $('select#card_paper option:selected').attr('data-paper-ratio');
				$color_format = $('select#card_color option:selected').attr('data-color');
				$print = $('select#card_color option:selected').attr('data-print');
				$division = 30;
				$final_edition = $edition / $division;
				$price = $final_edition * $paper_ratio + parseInt($print_file) + $final_edition * $print;
				$('span#final_price').text($price);



				if ($color_format == 1) {
					$('.card-images img').hide();
					$('#card_1_0').show('slow');
				}
				if ($color_format == 2) {
					$('.card-images img').hide();
					$('#card_1_1').show('slow');
				}
				if ($color_format == 3) {
					$('.card-images img').hide();
					$('#card_4_0').show('slow');
				}
				if ($color_format == 4) {
					$('.card-images img').hide();
					$('#card_4_1').show('slow');
				}
				if ($color_format == 5) {
					$('.card-images img').hide();
					$('#card_4_4').show('slow');
				}
			})

		});
	</script>
</body>
</html>